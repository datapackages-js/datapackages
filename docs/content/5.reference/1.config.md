---
title: Configuration Reference
description: Detailed documentation for datasets.config.ts and the defineDatasets helper.
---

# Configuration Reference

The `datasets.config.ts` (or `datasets.config.json`) file controls how your data is fetched, transformed, and indexed during the build process.

## `defineDatasets`

Use the `defineDatasets` helper for full TypeScript auto-completion.

```typescript
import { defineDatasets } from "@datapackages/dataset/config";

export default defineDatasets({
  // Global configuration
  cwd: "./",
  
  sources: {
    // Individual sources
  }
});
```

## Source Options

Each key in the `sources` object defines a data source.

```typescript
sources: {
  countries: {
    uri: "https://example.com/data.json",
    format: "json", // "json" | "ndjson" | "csv"
    
    // Optional: Transformation function
    transform: (data) => data.map(item => ({ ...item, id: item.cca2 })),
    
    // Optional: Search configuration
    search: {
      enabled: true,
      fields: ["name.common", "cca2"], // Fields to index for Orama
    }
  }
}
```

### Property Reference

| Property           | Type       | Description                                                          |
| :----------------- | :--------- | :------------------------------------------------------------------- |
| `uri`              | `string`   | The remote URL or local file path to the data source.                |
| `format`           | `string`   | The data format. Defaults to auto-detecting from the extension.      |
| `transform`        | `function` | A function to clean or modify data during the update process.        |
| `search`           | `object`   | Configuration for building a client-side search index.               |
| `enumeratedFields` | `string[]` | Fields to generate TypeScript union types for (e.g., `CountryCode`). |

## Search Configuration

The `search` object controls the pre-built Orama index.

```typescript
search: {
  fields: ["name.common", "cca3"], // Fields used for full-text search
  depth: 2,                        // How deep to crawl nested objects
  language: "english",             // Tokenizer language
}
```

## CLI Variables

You can use environment variables in your config via `process.env`. This is useful for API keys or private URLs.

```typescript
export default defineDatasets({
  sources: {
    privateData: {
      uri: `https://api.example.com/data?key=${process.env.API_KEY}`,
    }
  }
});
```
