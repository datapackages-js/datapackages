
 RUN  v3.2.4 /Users/zaosoula/Github/datapackages/packages/medical-terminologies

 ❯ src/france/__tests__/medical.test.ts (8 tests | 8 failed) 131ms
   × Medical Terminologies - France > Profession > should load all professions 20ms
     → Cannot read properties of undefined (reading 'startsWith')
   × Medical Terminologies - France > Profession > should get profession by code 2ms
     → Cannot read properties of undefined (reading 'startsWith')
   × Medical Terminologies - France > Profession > should get profession by label 2ms
     → Cannot read properties of undefined (reading 'startsWith')
   × Medical Terminologies - France > Profession > should search professions 2ms
     → Cannot read properties of undefined (reading 'startsWith')
   × Medical Terminologies - France > Profession > should include expertises for Médecin 2ms
     → Cannot read properties of undefined (reading 'startsWith')
   × Medical Terminologies - France > Expertise > should get expertise by code with shortDisplay 15ms
     → Cannot read properties of undefined (reading 'match')
   × Medical Terminologies - France > Expertise > should link back to professions 3ms
     → Cannot read properties of undefined (reading 'match')
   × Medical Terminologies - France > ActeSpecifique > should get acte by code 85ms
     → expected undefined to be defined

⎯⎯⎯⎯⎯⎯⎯ Failed Tests 8 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/france/__tests__/medical.test.ts > Medical Terminologies - France > Profession > should load all professions
TypeError: Cannot read properties of undefined (reading 'startsWith')
 ❯ src/france/profession/index.ts:47:23
     45|             (e: any): e is NonNullable<typeof e> =>
     46|               !!e &&
     47|               (e.code.startsWith(`G15_${concept.code}/`) ||
       |                       ^
     48|                 e.code === `G15_${concept.code}`),
     49|           )
 ❯ src/france/profession/index.ts:44:12
 ❯ Profession.loadData src/france/profession/index.ts:37:36
 ❯ Profession.load src/france/shared.ts:35:17
 ❯ Profession.all src/france/shared.ts:45:5
 ❯ src/france/__tests__/medical.test.ts:15:19

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/8]⎯

 FAIL  src/france/__tests__/medical.test.ts > Medical Terminologies - France > Profession > should get profession by code
TypeError: Cannot read properties of undefined (reading 'startsWith')
 ❯ src/france/profession/index.ts:47:23
     45|             (e: any): e is NonNullable<typeof e> =>
     46|               !!e &&
     47|               (e.code.startsWith(`G15_${concept.code}/`) ||
       |                       ^
     48|                 e.code === `G15_${concept.code}`),
     49|           )
 ❯ src/france/profession/index.ts:44:12
 ❯ Profession.loadData src/france/profession/index.ts:37:36
 ❯ Profession.load src/france/shared.ts:35:17
 ❯ Profession.getByCode src/france/shared.ts:53:5
 ❯ src/france/__tests__/medical.test.ts:22:23

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/8]⎯

 FAIL  src/france/__tests__/medical.test.ts > Medical Terminologies - France > Profession > should get profession by label
TypeError: Cannot read properties of undefined (reading 'startsWith')
 ❯ src/france/profession/index.ts:47:23
     45|             (e: any): e is NonNullable<typeof e> =>
     46|               !!e &&
     47|               (e.code.startsWith(`G15_${concept.code}/`) ||
       |                       ^
     48|                 e.code === `G15_${concept.code}`),
     49|           )
 ❯ src/france/profession/index.ts:44:12
 ❯ Profession.loadData src/france/profession/index.ts:37:36
 ❯ Profession.load src/france/shared.ts:35:17
 ❯ Profession.getByLabel src/france/shared.ts:61:5
 ❯ src/france/__tests__/medical.test.ts:29:26

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/8]⎯

 FAIL  src/france/__tests__/medical.test.ts > Medical Terminologies - France > Profession > should search professions
TypeError: Cannot read properties of undefined (reading 'startsWith')
 ❯ src/france/profession/index.ts:47:23
     45|             (e: any): e is NonNullable<typeof e> =>
     46|               !!e &&
     47|               (e.code.startsWith(`G15_${concept.code}/`) ||
       |                       ^
     48|                 e.code === `G15_${concept.code}`),
     49|           )
 ❯ src/france/profession/index.ts:44:12
 ❯ Profession.loadData src/france/profession/index.ts:37:36
 ❯ Profession.load src/france/shared.ts:35:17
 ❯ Profession.search ../plugin-search/dist/index.mjs:25:9
 ❯ src/france/__tests__/medical.test.ts:35:23

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/8]⎯

 FAIL  src/france/__tests__/medical.test.ts > Medical Terminologies - France > Profession > should include expertises for Médecin
TypeError: Cannot read properties of undefined (reading 'startsWith')
 ❯ src/france/profession/index.ts:47:23
     45|             (e: any): e is NonNullable<typeof e> =>
     46|               !!e &&
     47|               (e.code.startsWith(`G15_${concept.code}/`) ||
       |                       ^
     48|                 e.code === `G15_${concept.code}`),
     49|           )
 ❯ src/france/profession/index.ts:44:12
 ❯ Profession.loadData src/france/profession/index.ts:37:36
 ❯ Profession.load src/france/shared.ts:35:17
 ❯ Profession.getByCode src/france/shared.ts:53:5
 ❯ src/france/__tests__/medical.test.ts:41:23

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/8]⎯

 FAIL  src/france/__tests__/medical.test.ts > Medical Terminologies - France > Expertise > should get expertise by code with shortDisplay
TypeError: Cannot read properties of undefined (reading 'match')
 ❯ src/france/expertise/index.ts:47:40
     45|         if (!flattened) return acc;
     46| 
     47|         const profMatch = concept.code.match(/^G15_(\d+)/);
       |                                        ^
     48|         const profCode = profMatch ? profMatch[1] : null;
     49|         const profession = profCode ? allProfessions[profCode] : null;
 ❯ Expertise.loadData src/france/expertise/index.ts:39:36
 ❯ Expertise.load src/france/shared.ts:35:17
 ❯ Expertise.getByCode src/france/shared.ts:53:5
 ❯ src/france/__tests__/medical.test.ts:56:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/8]⎯

 FAIL  src/france/__tests__/medical.test.ts > Medical Terminologies - France > Expertise > should link back to professions
TypeError: Cannot read properties of undefined (reading 'match')
 ❯ src/france/expertise/index.ts:47:40
     45|         if (!flattened) return acc;
     46| 
     47|         const profMatch = concept.code.match(/^G15_(\d+)/);
       |                                        ^
     48|         const profCode = profMatch ? profMatch[1] : null;
     49|         const profession = profCode ? allProfessions[profCode] : null;
 ❯ Expertise.loadData src/france/expertise/index.ts:39:36
 ❯ Expertise.load src/france/shared.ts:35:17
 ❯ Expertise.getByCode src/france/shared.ts:53:5
 ❯ src/france/__tests__/medical.test.ts:65:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/8]⎯

 FAIL  src/france/__tests__/medical.test.ts > Medical Terminologies - France > ActeSpecifique > should get acte by code
AssertionError: expected undefined to be defined
 ❯ src/france/__tests__/medical.test.ts:81:17
     79|     it("should get acte by code", async () => {
     80|       const a = await acte.getByCode("0001");
     81|       expect(a).toBeDefined();
       |                 ^
     82|       expect(a?.display).toBeDefined();
     83|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/8]⎯


 Test Files  1 failed (1)
      Tests  8 failed (8)
   Start at  17:03:14
   Duration  501ms (transform 126ms, setup 0ms, collect 100ms, tests 131ms, environment 0ms, prepare 94ms)

